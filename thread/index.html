<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>Forum Anonyme - Messages</title>
    <style>
      body {
        font-family: sans-serif;
        padding: 2rem;
        background: #f5f5f5;
      }
      .message {
        background: white;
        margin: 1rem 0;
        padding: 1rem;
        border-radius: 5px;
      }
      .pseudo {
        font-weight: bold;
        color: #007bff;
      }
      .content {
        margin-top: 0.5rem;
      }
      .timestamp {
        font-size: 0.8rem;
        color: #777;
      }
    </style>
  </head>
  <body>
    <h1>Messages du Forum</h1>
    <div id="messages"></div>

    <script>
      fetch('/api/messages')
        .then(res => res.json())
        .then(data => {
          const container = document.getElementById('messages');
          data.forEach(msg => {
            container.innerHTML += `
            <div class="message">
              <div class="pseudo">${msg.pseudo}</div>
              <div class="content">${msg.content}</div>
              <div class="timestamp">${new Date(msg.created_at).toLocaleString()}</div>
            </div>
          `;
          });
        })
        .catch(err => {
          document.getElementById('messages').innerText = 'Erreur de chargement des messages.';
        });
    </script>
  </body>
</html>
